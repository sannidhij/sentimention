%p Distribution of positive, negative and neutral tweets for "thoughtworks"
:javascript
  var width = 400,
      height = 400,
      outerRadius = Math.min(width, height) / 2,
      innerRadius = outerRadius * .6,
      data = [#{@positive_count}, #{@negative_count}, #{@neutral_count}],
      colors = ['#228B22', '#FF3030', '#97FFFF'],
      donut = d3.layout.pie(),
      arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);

  var vis = d3.select("body")
    .append("svg")
      .data([data])
      .attr("width", width)
      .attr("height", height);

  var arcs = vis.selectAll("g.arc")
      .data(donut)
    .enter().append("g")
      .attr("class", "arc")
      .attr("transform", "translate(" + outerRadius + "," + outerRadius + ")");

  arcs.append("path")
      .attr("fill", function(d, i) { return colors[i]; })
      .attr("d", arc);

  arcs.append("text")
      .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
      .attr("dy", ".35em")
      .attr("text-anchor", "middle")
      .attr("display", function(d) { return d.value > .15 ? null : "none"; })
      .text(function(d, i) { return d.value; });

    function tweenDonut(b) {
      b.innerRadius = radius * .6;
      var i = d3.interpolate({innerRadius: 0}, b);
      return function(t) {
        return arc(i(t));
      };
    }
= link_to "Back to list", tweets_path